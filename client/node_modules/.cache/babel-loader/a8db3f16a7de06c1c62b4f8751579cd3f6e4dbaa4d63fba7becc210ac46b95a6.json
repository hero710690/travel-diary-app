{"ast":null,"code":"import React from'react';import{useParams,useNavigate,Link}from'react-router-dom';import{useQuery,useMutation,useQueryClient}from'react-query';import{tripsAPI}from'../services/api';import{PencilIcon,TrashIcon,MapIcon}from'@heroicons/react/24/outline';import LoadingSpinner from'../components/LoadingSpinner';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TripDetailPage=()=>{const{id}=useParams();const navigate=useNavigate();const queryClient=useQueryClient();const{data:tripData,isLoading,error}=useQuery(['trip',id],()=>tripsAPI.getTrip(id),{enabled:!!id,select:response=>response.data.trip});const deleteTripMutation=useMutation(tripsAPI.deleteTrip,{onSuccess:()=>{queryClient.invalidateQueries('trips');toast.success('Trip deleted successfully!');navigate('/dashboard');},onError:error=>{var _error$response,_error$response$data;const message=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to delete trip';toast.error(message);}});const handleDeleteTrip=()=>{if(window.confirm(\"Are you sure you want to delete \\\"\".concat(tripData===null||tripData===void 0?void 0:tripData.title,\"\\\"? This action cannot be undone.\"))){deleteTripMutation.mutate(id);}};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\"})});}if(error||!tripData){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600\",children:\"Failed to load trip details. Please try again.\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-2\",children:tripData.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:tripData.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/trips/\".concat(id,\"/plan\"),className:\"inline-flex items-center px-4 py-2 border border-blue-300 shadow-sm text-sm font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(MapIcon,{className:\"h-4 w-4 mr-2\"}),\"Plan Trip\"]}),/*#__PURE__*/_jsxs(Link,{to:\"/trips/\".concat(id,\"/edit\"),className:\"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(PencilIcon,{className:\"h-4 w-4 mr-2\"}),\"Edit Trip\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleDeleteTrip,disabled:deleteTripMutation.isLoading,className:\"inline-flex items-center px-4 py-2 border border-red-300 shadow-sm text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4 mr-2\"}),deleteTripMutation.isLoading?'Deleting...':'Delete Trip']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900\",children:\"Destination\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:tripData.destination})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900\",children:\"Duration\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[tripData.duration,\" days\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900\",children:\"Status\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 capitalize\",children:tripData.status})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Trip Details\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"This is a placeholder for the detailed trip view. In the full implementation, this would include tabs for itinerary, expenses, journal, packing list, etc.\"})]})]});};export default TripDetailPage;","map":{"version":3,"names":["React","useParams","useNavigate","Link","useQuery","useMutation","useQueryClient","tripsAPI","PencilIcon","TrashIcon","MapIcon","LoadingSpinner","toast","jsx","_jsx","jsxs","_jsxs","TripDetailPage","id","navigate","queryClient","data","tripData","isLoading","error","getTrip","enabled","select","response","trip","deleteTripMutation","deleteTrip","onSuccess","invalidateQueries","success","onError","_error$response","_error$response$data","message","handleDeleteTrip","window","confirm","concat","title","mutate","className","children","size","description","to","onClick","disabled","destination","duration","status"],"sources":["/Users/jeanlee/travel-diary-app/client/src/pages/TripDetailPage.tsx"],"sourcesContent":["import React from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport { tripsAPI } from '../services/api';\nimport { PencilIcon, TrashIcon, MapIcon } from '@heroicons/react/24/outline';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport toast from 'react-hot-toast';\n\nconst TripDetailPage: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n\n  const { data: tripData, isLoading, error } = useQuery(\n    ['trip', id],\n    () => tripsAPI.getTrip(id!),\n    {\n      enabled: !!id,\n      select: (response) => response.data.trip,\n    }\n  );\n\n  const deleteTripMutation = useMutation(tripsAPI.deleteTrip, {\n    onSuccess: () => {\n      queryClient.invalidateQueries('trips');\n      toast.success('Trip deleted successfully!');\n      navigate('/dashboard');\n    },\n    onError: (error: any) => {\n      const message = error.response?.data?.message || 'Failed to delete trip';\n      toast.error(message);\n    },\n  });\n\n  const handleDeleteTrip = () => {\n    if (window.confirm(`Are you sure you want to delete \"${tripData?.title}\"? This action cannot be undone.`)) {\n      deleteTripMutation.mutate(id!);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <LoadingSpinner size=\"lg\" />\n      </div>\n    );\n  }\n\n  if (error || !tripData) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-red-600\">Failed to load trip details. Please try again.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white shadow rounded-lg p-6\">\n        <div className=\"flex justify-between items-start mb-4\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">{tripData.title}</h1>\n            <p className=\"text-gray-600\">{tripData.description}</p>\n          </div>\n          <div className=\"flex space-x-2\">\n            <Link\n              to={`/trips/${id}/plan`}\n              className=\"inline-flex items-center px-4 py-2 border border-blue-300 shadow-sm text-sm font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n            >\n              <MapIcon className=\"h-4 w-4 mr-2\" />\n              Plan Trip\n            </Link>\n            <Link\n              to={`/trips/${id}/edit`}\n              className=\"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n            >\n              <PencilIcon className=\"h-4 w-4 mr-2\" />\n              Edit Trip\n            </Link>\n            <button\n              onClick={handleDeleteTrip}\n              disabled={deleteTripMutation.isLoading}\n              className=\"inline-flex items-center px-4 py-2 border border-red-300 shadow-sm text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              <TrashIcon className=\"h-4 w-4 mr-2\" />\n              {deleteTripMutation.isLoading ? 'Deleting...' : 'Delete Trip'}\n            </button>\n          </div>\n        </div>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <h3 className=\"font-medium text-gray-900\">Destination</h3>\n            <p className=\"text-gray-600\">{tripData.destination}</p>\n          </div>\n          <div>\n            <h3 className=\"font-medium text-gray-900\">Duration</h3>\n            <p className=\"text-gray-600\">{tripData.duration} days</p>\n          </div>\n          <div>\n            <h3 className=\"font-medium text-gray-900\">Status</h3>\n            <p className=\"text-gray-600 capitalize\">{tripData.status}</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Placeholder for trip tabs/sections */}\n      <div className=\"bg-white shadow rounded-lg p-6\">\n        <h2 className=\"text-lg font-medium text-gray-900 mb-4\">Trip Details</h2>\n        <p className=\"text-gray-600\">\n          This is a placeholder for the detailed trip view. In the full implementation, \n          this would include tabs for itinerary, expenses, journal, packing list, etc.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default TripDetailPage;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,WAAW,CAAEC,IAAI,KAAQ,kBAAkB,CAC/D,OAASC,QAAQ,CAAEC,WAAW,CAAEC,cAAc,KAAQ,aAAa,CACnE,OAASC,QAAQ,KAAQ,iBAAiB,CAC1C,OAASC,UAAU,CAAEC,SAAS,CAAEC,OAAO,KAAQ,6BAA6B,CAC5E,MAAO,CAAAC,cAAc,KAAM,8BAA8B,CACzD,MAAO,CAAAC,KAAK,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpC,KAAM,CAAAC,cAAwB,CAAGA,CAAA,GAAM,CACrC,KAAM,CAAEC,EAAG,CAAC,CAAGjB,SAAS,CAAiB,CAAC,CAC1C,KAAM,CAAAkB,QAAQ,CAAGjB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAkB,WAAW,CAAGd,cAAc,CAAC,CAAC,CAEpC,KAAM,CAAEe,IAAI,CAAEC,QAAQ,CAAEC,SAAS,CAAEC,KAAM,CAAC,CAAGpB,QAAQ,CACnD,CAAC,MAAM,CAAEc,EAAE,CAAC,CACZ,IAAMX,QAAQ,CAACkB,OAAO,CAACP,EAAG,CAAC,CAC3B,CACEQ,OAAO,CAAE,CAAC,CAACR,EAAE,CACbS,MAAM,CAAGC,QAAQ,EAAKA,QAAQ,CAACP,IAAI,CAACQ,IACtC,CACF,CAAC,CAED,KAAM,CAAAC,kBAAkB,CAAGzB,WAAW,CAACE,QAAQ,CAACwB,UAAU,CAAE,CAC1DC,SAAS,CAAEA,CAAA,GAAM,CACfZ,WAAW,CAACa,iBAAiB,CAAC,OAAO,CAAC,CACtCrB,KAAK,CAACsB,OAAO,CAAC,4BAA4B,CAAC,CAC3Cf,QAAQ,CAAC,YAAY,CAAC,CACxB,CAAC,CACDgB,OAAO,CAAGX,KAAU,EAAK,KAAAY,eAAA,CAAAC,oBAAA,CACvB,KAAM,CAAAC,OAAO,CAAG,EAAAF,eAAA,CAAAZ,KAAK,CAACI,QAAQ,UAAAQ,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBf,IAAI,UAAAgB,oBAAA,iBAApBA,oBAAA,CAAsBC,OAAO,GAAI,uBAAuB,CACxE1B,KAAK,CAACY,KAAK,CAACc,OAAO,CAAC,CACtB,CACF,CAAC,CAAC,CAEF,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,GAAIC,MAAM,CAACC,OAAO,sCAAAC,MAAA,CAAqCpB,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEqB,KAAK,qCAAkC,CAAC,CAAE,CACzGb,kBAAkB,CAACc,MAAM,CAAC1B,EAAG,CAAC,CAChC,CACF,CAAC,CAED,GAAIK,SAAS,CAAE,CACb,mBACET,IAAA,QAAK+B,SAAS,CAAC,uCAAuC,CAAAC,QAAA,cACpDhC,IAAA,CAACH,cAAc,EAACoC,IAAI,CAAC,IAAI,CAAE,CAAC,CACzB,CAAC,CAEV,CAEA,GAAIvB,KAAK,EAAI,CAACF,QAAQ,CAAE,CACtB,mBACER,IAAA,QAAK+B,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAChChC,IAAA,MAAG+B,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,gDAA8C,CAAG,CAAC,CAC3E,CAAC,CAEV,CAEA,mBACE9B,KAAA,QAAK6B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB9B,KAAA,QAAK6B,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7C9B,KAAA,QAAK6B,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpD9B,KAAA,QAAA8B,QAAA,eACEhC,IAAA,OAAI+B,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAExB,QAAQ,CAACqB,KAAK,CAAK,CAAC,cAC3E7B,IAAA,MAAG+B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAExB,QAAQ,CAAC0B,WAAW,CAAI,CAAC,EACpD,CAAC,cACNhC,KAAA,QAAK6B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B9B,KAAA,CAACb,IAAI,EACH8C,EAAE,WAAAP,MAAA,CAAYxB,EAAE,SAAQ,CACxB2B,SAAS,CAAC,uNAAuN,CAAAC,QAAA,eAEjOhC,IAAA,CAACJ,OAAO,EAACmC,SAAS,CAAC,cAAc,CAAE,CAAC,YAEtC,EAAM,CAAC,cACP7B,KAAA,CAACb,IAAI,EACH8C,EAAE,WAAAP,MAAA,CAAYxB,EAAE,SAAQ,CACxB2B,SAAS,CAAC,oNAAoN,CAAAC,QAAA,eAE9NhC,IAAA,CAACN,UAAU,EAACqC,SAAS,CAAC,cAAc,CAAE,CAAC,YAEzC,EAAM,CAAC,cACP7B,KAAA,WACEkC,OAAO,CAAEX,gBAAiB,CAC1BY,QAAQ,CAAErB,kBAAkB,CAACP,SAAU,CACvCsB,SAAS,CAAC,gQAAgQ,CAAAC,QAAA,eAE1QhC,IAAA,CAACL,SAAS,EAACoC,SAAS,CAAC,cAAc,CAAE,CAAC,CACrCf,kBAAkB,CAACP,SAAS,CAAG,aAAa,CAAG,aAAa,EACvD,CAAC,EACN,CAAC,EACH,CAAC,cAENP,KAAA,QAAK6B,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpD9B,KAAA,QAAA8B,QAAA,eACEhC,IAAA,OAAI+B,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAC,aAAW,CAAI,CAAC,cAC1DhC,IAAA,MAAG+B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAExB,QAAQ,CAAC8B,WAAW,CAAI,CAAC,EACpD,CAAC,cACNpC,KAAA,QAAA8B,QAAA,eACEhC,IAAA,OAAI+B,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAC,UAAQ,CAAI,CAAC,cACvD9B,KAAA,MAAG6B,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAExB,QAAQ,CAAC+B,QAAQ,CAAC,OAAK,EAAG,CAAC,EACtD,CAAC,cACNrC,KAAA,QAAA8B,QAAA,eACEhC,IAAA,OAAI+B,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAC,QAAM,CAAI,CAAC,cACrDhC,IAAA,MAAG+B,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAExB,QAAQ,CAACgC,MAAM,CAAI,CAAC,EAC1D,CAAC,EACH,CAAC,EACH,CAAC,cAGNtC,KAAA,QAAK6B,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7ChC,IAAA,OAAI+B,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cACxEhC,IAAA,MAAG+B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,4JAG7B,CAAG,CAAC,EACD,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7B,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}